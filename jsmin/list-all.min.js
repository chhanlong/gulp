require.config({baseUrl:"../../js",paths:{jquery:"jquery",mui:"mui/3.7.1/mui.min",iscroll:"iscroll/5.2.0/iscroll.min"},shim:{iscroll:{deps:["jquery"],exports:"iscroll"}}}),require(["jquery","mui","iscroll"],function(l,i,o){function n(n){var t=String(window.document.location.href),i=new RegExp("(^|)"+n+"=([^/&]*)(/&|$)","gi").exec(t);return i?i[2]:""}function e(n){n=n||[];for(var t={},i=0;i<n.length;i++){var e=n[i];void 0===t[e]&&(t[e]=1)}for(var i in n.length=0,t)n[n.length]=i;return n}var s={},r=decodeURI(n("attr")),c=decodeURI(n("b"));s.ajax=function(){var n,t=[],i=[];l(".option").find("a").each(function(){t.push(l(this).attr("value"))}),l(".category .category_content .on").each(function(){l(this).parents(".category").hasClass("left-brand")?n=l(this).attr("value"):i.push(l(this).attr("value"))}),console.log("b",n||"空"),console.log("arr2",e(t.concat(i)).join("-")?e(t.concat(i)).join("-"):"空")},s.series=function(n){console.log(n),i.toast("请求系列",{duration:1e3})},s.all=function(){var e=l(".list-all");myScroll=new o(".left-content .iScroll_floor",{scrollX:!1,scrollY:!0,scrollbars:"custom",click:!1}),e.find(".tabTitle").children("li").on("click",function(){l(this).toggleClass("on")&&l(this).children(".ico").toggleClass("ico2"),l(this).siblings().removeClass("on")&&l(this).siblings().children(".ico").removeClass("ico2"),e.find(".tabContent").children(".list").eq(l(this).index()).toggleClass("h").siblings().addClass("h"),4==l(this).index()&&(l(".list-left").removeClass("h"),l(".option").find("a").each(function(){var n=l(".category_content span[value="+l(this).attr("value")+"]");0==n.hasClass("on")&&n.trigger("click")}),myScroll.refresh())});function n(n){n.on("click",function(){e.find(".list-left").addClass("h"),e.find(".tabTitle").children("li").eq(4).removeClass("on"),e.find(".tabTitle").children("li").eq(4).children(".ico").removeClass("ico2"),e.find(".tabContent").children(".list").eq(4).addClass("h")})}n(e.find(".list-left").children(".bj")),n(l("#delete")),n(l(".list-left .footer_button")),e.find(".tabContent").children(".list").children("li").on("click",function(){var n=l(this),t=n.text(),i=n.attr("value");0==n.hasClass("on")&&(n.siblings("li[class~=on]").attr("value")&&e.find(".option a[value="+n.siblings("li[class~=on]").attr("value")+"]").remove(),n.addClass("on").siblings().removeClass("on"),e.find(".option").append("<a value="+i+">"+t+"<span>x</span></a>"),e.find(".option").removeClass("h"),s.ajax()),n.parents(".list").addClass("h")}),l(".option").on("click","a",function(){var n=l(this).attr("value");e.find(".tabContent").children(".list").children("li[value="+n+"]").removeClass("on"),l(this).remove(),s.ajax(),0==e.find(".option").children("a").length&&e.find(".option").addClass("h")})},s.left=function(){var a=l(".list-left");l(".category_content").find("span").unbind("click").on("click",function(){var n=l(this).text(),t=l(this).attr("value");if(l(this).hasClass("on")?(l(this).removeClass("on"),a.find(".choice").children("a[value="+t+"]").remove(),l(".option").find("a[value="+t+"]").trigger("click")):(l(this).siblings("span[class~=on]").attr("value")&&a.find(".choice").children("a[value="+l(this).siblings("span[class~=on]").attr("value")+"]").remove(),l(this).addClass("on").siblings().removeClass("on"),a.find(".choice").append("<a value="+t+">"+n+"<span>x</span></a>"),l(".list-all .tabContent .list li[value="+t+"]").trigger("click")),2==l(this).parents(".category").find(".category_open").attr("data-index")){var i=l(".left-brand .category_content .on"),e=l(".left-series");0<i.length?(e.find(".category_content").children("span").each(function(){l(".choice a[value="+l(this).attr("value")+"]").trigger("click")}),s.series(i.attr("value")),e.removeClass("h")):(e.addClass("h"),e.find(".category_content").children(".on").trigger("click"))}myScroll.refresh()}),a.find(".choice").on("click","a",function(){var n=l(this),t=n.attr("value");l(".category_content").find("span[value="+t+"]").removeClass("on"),n.remove(),myScroll.refresh()}),a.on("click",".category_title .category_open",function(){var n=l(this);0==n.attr("data-index")?(n.attr("data-index",1),n.parents(".category_title").siblings(".category_content").addClass("category-on"),n.children("em").text("收起")&&n.children(".arrow").addClass("arrow2")):1==n.attr("data-index")?(n.attr("data-index",0),n.parents(".category_title").siblings(".category_content").removeClass("category-on"),n.children("em").text("全部")&&n.children(".arrow").removeClass("arrow2")):2==n.attr("data-index")&&t(),myScroll.refresh()});var t=function(){a.find(".list-left-brand").children(".brand-list").children(".iScroll_floor").css("height",l(window).height()-94),a.find(".list-left-brand").removeClass("h"),new o(".list-left-brand .iScroll_floor",{scrollX:!1,scrollY:!0,scrollbars:"custom",click:!1}),a.find(".list-left-brand").children(".brand-title").children(".delete").on("click",function(){a.find(".list-left-brand").addClass("h")});var n=l(".brand-name");n.unbind("click").on("click",function(){l(this).hasClass("on")?(n.removeClass("on")&&n.find(".icon").hide(),l(this).removeClass("on")&&l(this).find(".icon").hide()):(n.removeClass("on")&&n.find(".icon").hide(),l(this).addClass("on")&&l(this).find(".icon").show())}),l(".brand-name[value="+l(".left-brand .category_content .on").attr("value")+"]").trigger("click"),a.find(".list-left-brand .brand-footer").unbind("click").on("click",function(){n.each(function(){l(this).hasClass("on")&&l(".left-brand .category_content span[value="+l(this).attr("value")+"]").trigger("click")}),a.find(".list-left-brand").addClass("h")})};l(".footer_cancel").on("click",function(){var n=l(".category_content").find("span");n.removeClass("on"),l(".choice").html(""),n.each(function(){l(".option").find("a[value="+l(this).attr("value")+"]").trigger("click")})}),l(".footer_button").on("click",function(){i.toast("确定",{duration:1e3}),s.ajax()}),r&&(l(".option").removeClass("h"),l(".tabContent .list li[value="+r+"]").trigger("click")),c&&l(".left-brand .category_content span[value="+c+"]").trigger("click"),r||c||s.ajax()},s.init=function(){s.all(),s.left()},s.init()});