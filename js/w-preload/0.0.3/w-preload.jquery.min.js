!function(r,e){e.fn.wPreLoad=function(t){function o(r,e,t){var o,i,a="",n=r.split("?"),c=n[0],s=n[1],l="";if(s)for(n=s.split("&"),o=0;o<n.length;o++)n[o].split("=")[0]!=e&&(a+=l+n[o],l="&");return i=l+""+e+"="+t,c+"?"+a+i}function i(r){function e(r,e,t){var o,i={},a=r.split(e);if(t)for(o in a)i[a[o].split(t)[0]]=a[o].split(t)[1];else i[a[0]]=a[1];return i}if(!r)return!1;if(/\@\!/.test(r))return r;var t,o;t=e(r,"|",":");for(o in t)void 0===t[o]&&(t[o]="true"),t[o].indexOf(",")>0?t[o]=e(t[o],",","_"):t[o].indexOf("_")>0&&(t[o]=e(t[o],"_"));return t}function a(r,e){var t=r;return"string"==typeof e&&/\@\!/.test(e)?o(t,"x-oss-process","style")+e:"object"==typeof e&&(t=o(t,"x-oss-process","image"),e.resize&&(t+="/resize",t+=e.resize.m?",m_"+e.resize.m:"",t+=e.resize.w?",w_"+e.resize.w:"",t+=e.resize.h?",h_"+e.resize.h:"",t+=e.resize.color?",color_"+e.resize.color:"",t+=e.resize.limit?",limit_"+e.resize.limit:""),e.circle&&(t+="/circle",t+=e.circle.r?",r_"+e.circle.r:""),e.crop&&(t+="/crop",t+=e.crop.w?",w_"+e.crop.w:"",t+=e.crop.h?",h_"+e.crop.h:"",t+=e.crop.x?",x_"+e.crop.x:"",t+=e.crop.y?",y_"+e.crop.y:"",t+=e.crop.g?",g_"+e.crop.g:""),e.indexcrop&&(t+="/indexcrop",t+=e.indexcrop.x?",x_"+e.indexcrop.x:"",t+=e.indexcrop.y?",y_"+e.indexcrop.y:"",t+=e.indexcrop.i?",i_"+e.indexcrop.i:""),e["rounded-corners"]&&(t+="/rounded-corners",t+=e["rounded-corners"].r?",r_"+e["rounded-corners"].r:""),e["auto-orient"]&&(t+="/auto-orient",t+=e["auto-orient"]?","+e["auto-orient"]:""),e.rotate&&(t+="/rotate",t+=e.rotate?","+e.rotate:""),e.blur&&(t+="/blur",t+=e.blur.r?",r_"+e.blur.r:"",t+=e.blur.s?",s_"+e.blur.s:""),e.bright&&(t+="/bright",t+=e.bright?","+e.bright:""),e.contrast&&(t+="/contrast",t+=e.contrast?","+e.contrast:""),e.sharpen&&(t+="/sharpen",t+=e.sharpen?","+e.sharpen:""),e.format&&(t+="/format",t+=e.format?","+e.format:""),e.interlace&&(t+="/interlace",t+=e.interlace?","+e.interlace:""),e.quality&&(t+="/quality",t+=e.quality.q?",q_"+e.quality.q:"",t+=e.quality.Q?",Q_"+e.quality.Q:""),e.watermark&&(t+="/watermark",t+=e.watermark.image?",image_"+e.watermark.image:"",t+=e.watermark.t?",t_"+e.watermark.t:"",t+=e.watermark.g?",g_"+e.watermark.g:"",t+=e.watermark.x?",image_"+e.watermark.x:"",t+=e.watermark.y?",image_"+e.watermark.y:"",t+=e.watermark.voffset?",voffset_"+e.watermark.voffset:""),e["average-hue"]&&(t+="/average-hue"),e.info&&(t+="/info"),t)}function n(){if(l.length<=0)return!1;for(var r,t,o=e(window),n=l.length,s=0,p=o.scrollTop();s<n;s++)r=l[s],t=r.attr(c.imgProcessAttr)||"",r.offset().top<p-u||r.offset().top>p+2*u||(r.attr("src",function(){var e=r.attr(c.srcAttr);return c.setUrlParam&&t&&(e=a(e,i(t))),e}),r.removeAttr(c.srcAttr),r.removeAttr(c.imgProcessAttr),c.onchange&&c.onchange.call(r.get()),l.splice(s,1),n--,s--)}var c,s={srcAttr:"data-wpl",setUrlParam:!0,imgProcessAttr:"data-wpps",onchange:null},l=[],u=e(r).height();c=e.extend(s,t),this.each(function(){l.push(e(this))}),e(function(){n()}),e(r).on("scroll",function(){n()})}}(window,jQuery);