!function(r,t){t.fn.wPreLoad=function(e){function o(r,t,e){var o,i,a="",n=r.split("?"),s=n[0],c=n[1],l="";if(c)for(n=c.split("&"),o=0;o<n.length;o++)n[o].split("=")[0]!=t&&(a+=l+n[o],l="&");return i=l+""+t+"="+e,s+"?"+a+i}function i(r){function t(r,t,e){var o,i={},a=r.split(t);if(e)for(o in a)i[a[o].split(e)[0]]=a[o].split(e)[1];else i[a[0]]=a[1];return i}if(!r)return!1;if(/\@\!/.test(r))return r;var e,o;e=t(r,"|",":");for(o in e)void 0===e[o]&&(e[o]="true"),e[o].indexOf(",")>0?e[o]=t(e[o],",","_"):e[o].indexOf("_")>0&&(e[o]=t(e[o],"_"));return e}function a(r,t){var e=r;return"string"==typeof t&&/\@\!/.test(t)?o(e,"x-oss-process","style")+t:"object"==typeof t&&(e=o(e,"x-oss-process","image"),t.resize&&(e+="/resize",e+=t.resize.m?",m_"+t.resize.m:"",e+=t.resize.w?",w_"+t.resize.w:"",e+=t.resize.h?",h_"+t.resize.h:"",e+=t.resize.color?",color_"+t.resize.color:"",e+=t.resize.limit?",limit_"+t.resize.limit:""),t.circle&&(e+="/circle",e+=t.circle.r?",r_"+t.circle.r:""),t.crop&&(e+="/crop",e+=t.crop.w?",w_"+t.crop.w:"",e+=t.crop.h?",h_"+t.crop.h:"",e+=t.crop.x?",x_"+t.crop.x:"",e+=t.crop.y?",y_"+t.crop.y:"",e+=t.crop.g?",g_"+t.crop.g:""),t.indexcrop&&(e+="/indexcrop",e+=t.indexcrop.x?",x_"+t.indexcrop.x:"",e+=t.indexcrop.y?",y_"+t.indexcrop.y:"",e+=t.indexcrop.i?",i_"+t.indexcrop.i:""),t["rounded-corners"]&&(e+="/rounded-corners",e+=t["rounded-corners"].r?",r_"+t["rounded-corners"].r:""),t["auto-orient"]&&(e+="/auto-orient",e+=t["auto-orient"]?","+t["auto-orient"]:""),t.rotate&&(e+="/rotate",e+=t.rotate?","+t.rotate:""),t.blur&&(e+="/blur",e+=t.blur.r?",r_"+t.blur.r:"",e+=t.blur.s?",s_"+t.blur.s:""),t.bright&&(e+="/bright",e+=t.bright?","+t.bright:""),t.contrast&&(e+="/contrast",e+=t.contrast?","+t.contrast:""),t.sharpen&&(e+="/sharpen",e+=t.sharpen?","+t.sharpen:""),t.format&&(e+="/format",e+=t.format?","+t.format:""),t.interlace&&(e+="/interlace",e+=t.interlace?","+t.interlace:""),t.quality&&(e+="/quality",e+=t.quality.q?",q_"+t.quality.q:"",e+=t.quality.Q?",Q_"+t.quality.Q:""),t.watermark&&(e+="/watermark",e+=t.watermark.image?",image_"+t.watermark.image:"",e+=t.watermark.t?",t_"+t.watermark.t:"",e+=t.watermark.g?",g_"+t.watermark.g:"",e+=t.watermark.x?",image_"+t.watermark.x:"",e+=t.watermark.y?",image_"+t.watermark.y:"",e+=t.watermark.voffset?",voffset_"+t.watermark.voffset:""),t["average-hue"]&&(e+="/average-hue"),t.info&&(e+="/info"),e)}function n(){if(l.length<=0)return!1;for(var r,e,o=t(window),n=l.length,c=0,p=o.scrollTop();c<n;c++)r=l[c],e=r.attr(s.imgProcessAttr)||"",r.offset().top<p-u||r.offset().top>p+2*u||(r.attr("src",function(){var t=r.attr(s.srcAttr);return s.setUrlParam&&e&&(t=a(t,i(e))),t}),r.removeAttr(s.srcAttr),r.removeAttr(s.imgProcessAttr),l.splice(c,1),n--,c--)}var s,c={srcAttr:"data-wpl",setUrlParam:!0,imgProcessAttr:"data-wpps"},l=[],u=t(r).height();s=t.extend(c,e),this.each(function(){l.push(t(this))}),t(function(){n()}),t(r).on("scroll",function(){n()})}}(window,jQuery);